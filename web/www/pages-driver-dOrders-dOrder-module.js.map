{"version":3,"sources":["./src/app/pages/driver/dOrders/dOrders.component.ts","./src/app/pages/driver/dOrders/dOrders.component.html","./src/app/pages/driver/dOrders/dOrder.module.ts","./src/app/pages/driver/dOrders/dOrder-routing.module.ts","./src/app/pages/driver/dOrders/dOrders.component.scss"],"names":[],"mappings":"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","file":"pages-driver-dOrders-dOrder-module.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport {FormBuilder, FormControl, FormGroup} from '@angular/forms';\nimport {Orders} from '../../../func/Orders';\nimport {User} from '../../../func/User';\nimport {CommonService} from '../../../service/common.service';\nimport {UserService} from '../../../service/user.service';\nimport {OrdersService} from '../../../service/orders.service';\nimport {HttpErrorResponse} from '@angular/common/http';\nimport {config} from '../../../conf/app.conf';\nimport {UnknownProperty} from '../../../core/secondUtils';\n\n@Component({\n  selector: 'app-equipment',\n  templateUrl: './dOrders.component.html',\n  styleUrls: ['./dOrders.component.scss']\n})\nexport class DOrdersComponent implements OnInit {\n\n  orderForm: FormGroup;\n  status: number;\n  searchButtonSubmitting = false;\n  importButtonSubmitting = false;\n  fontColor = '';\n  /**\n   * 分页信息\n   */\n  public params = {\n    page: 0,\n    size: 10,\n  };\n\n  /* 分页数据 */\n  orders = {\n    totalPages: 0,\n    content: new Array<Orders>()\n  };\n\n  /* 查询参数 */\n  queryParams = {\n    page: 0,\n    size: this.params.size,\n    startPlace: new FormControl(),\n    endPlace: new FormControl()\n  };\n\n  private user: User;\n\n  constructor(private builder: FormBuilder,\n              private commonService: CommonService,\n              private userService: UserService,\n              private ordersService: OrdersService) {\n    this.commonService.appOnReady(\n      () => {\n        const user = this.userService.getCurrentUser();\n        this.user = user;\n      });\n  }\n\n  ngOnInit(): void {\n    this.orderForm = this.builder.group({\n      goodsName: null,\n      goods: null,\n      startPlace: null,\n      endPlace: null,\n      freight: null,\n      startTime: null,\n      endTime: null,\n      driver: null\n    });\n    this.paramsInit();\n    this.pageAll();\n  }\n\n  public college(order: Orders): void {\n    // 确认框\n    this.commonService.confirm((confirm: boolean) => {\n      if (confirm) {\n        this.ordersService.updateStatus(order.id, 1).subscribe(() => {\n          this.commonService.success(() => {\n          }, '揽收成功');\n          this.pageAll();\n        }, (response: HttpErrorResponse) => {\n          this.commonService.httpError(response);\n        });\n      }\n    }, '即将揽收订单');\n  }\n\n  public pageAll(): void {\n    this.ordersService.pageByStatus( 0, this.params.page,\n      this.params.size)\n      .subscribe((response: { totalPages: number, content: Array<Orders> }) => {\n        this.orders = response;\n        // this.pages = this.makePagesByTotalPages(this.params.page, response.totalPages);\n      });\n  }\n\n  public search(): void {\n    this.searchButtonSubmitting = true;\n    this.pageAll();\n  }\n\n  /**\n   * 重新加载数据 根据 size\n   */\n  public reloadBySize(size: number): void {\n    this.params.size = size;\n    this.pageAll();\n  }\n\n  /**\n   * 重新加载数据 根据 page\n   */\n  public reloadByPage(page: number): void {\n    this.params.page = page;\n    this.pageAll();\n  }\n\n\n  /**\n   * 参数初始化\n   */\n  paramsInit(): void {\n    this.params.page = 0;\n    this.params.size = config.size;\n\n    // 获取历史参数\n    const params = this.commonService.getCurrentRouteState();\n\n    if (params.page) {\n      this.params.page = params.page as number;\n    }\n    if (params.size) {\n      this.params.size = params.size as number;\n    }\n  }\n\n  /**\n   * 保存历史参数\n   */\n  updateCurrentRouteParams(): void {\n    const params: UnknownProperty = {};\n    params.page = this.params.page;\n    params.size = this.params.size;\n    params.name = this.orderForm.getRawValue().name;\n    this.commonService.updateCurrentRouteState(params);\n  }\n\n  getFontColor(status: number): any {\n    if (status === 0) {\n      this.fontColor = '#000000';\n    }\n    else if (status === 1) {\n      this.fontColor = '#2e5fee';\n    }\n    else if (status === 2) {\n      this.fontColor = '#37be2e';\n    }\n    else if (status === 3) {\n      this.fontColor = '#df2e2e';\n    }\n    return this.fontColor;\n  }\n\n  onPageSelected(page: number): void {\n    this.params.page = page;\n    this.pageAll();\n  }\n\n  onSizeSelected(size: number): void {\n    config.size = size;\n    this.ngOnInit();\n  }\n\n  /**\n   * 加载数据\n   */\n  loadData(): void {\n    const queryParams = {\n      page: this.params.page,\n      size: config.size,\n      startPlace: this.queryParams.startPlace.value,\n      endPlace: this.queryParams.endPlace.value\n    };\n\n    this.ordersService.query(queryParams)\n      .subscribe((response: { totalPages: number, content: Array<Orders> }) => {\n        this.orders = response;\n        // this.pages = this.makePagesByTotalPages(this.params.page, response.totalPages);\n      });\n  }\n\n  onQuery(): void {\n    this.loadData();\n  }\n  clear(): void {\n    this.queryParams.startPlace = new FormControl();\n    this.queryParams.endPlace = new FormControl();\n    this.loadData();\n  }\n}\n\n\n","export default \"<form (ngSubmit)=\\\"onQuery()\\\">\\n  <label>出发地：<input name=\\\"name\\\" [formControl]=\\\"queryParams.startPlace\\\" type=\\\"text\\\"/></label>\\n  &nbsp;\\n  <label>目的地：<input name=\\\"no\\\" [formControl]=\\\"queryParams.endPlace\\\" type=\\\"text\\\"/></label>\\n  &nbsp;\\n  <button type=\\\"submit\\\" class=\\\"btn btn-info btn-sm\\\"><i class=\\\"fas fa-search\\\"></i>查询</button>\\n  &nbsp;\\n  <button class=\\\"btn btn-sm btn-warning\\\" (click)=\\\"clear()\\\">\\n    <i class=\\\"fas fa-trash-alt\\\"></i>\\n    清空\\n  </button>\\n</form>\\n\\n<table class=\\\"table table-striped table-bordered mt-2\\\">\\n  <thead class=\\\"thead-light\\\">\\n  <tr>\\n    <th scope=\\\"col\\\">序号</th>\\n    <th scope=\\\"col\\\">货物名称</th>\\n    <th scope=\\\"col\\\">货物类别</th>\\n    <th scope=\\\"col\\\">运输起点</th>\\n    <th scope=\\\"col\\\">运输目的地</th>\\n    <th scope=\\\"col\\\">运费(单位：元)</th>\\n    <th scope=\\\"col\\\">发布人</th>\\n    <th scope=\\\"col\\\">发布时间</th>\\n    <th scope=\\\"col\\\">操作</th>\\n  </tr>\\n  </thead>\\n  <tbody>\\n  <tr *ngFor=\\\"let order of orders.content; let $index = index;\\\">\\n    <td>{{$index + 1}}</td>\\n    <td>{{order.goodsName}}</td>\\n    <td>{{order?.goods?.name}}</td>\\n    <td>{{order.startPlace}}</td>\\n    <td>{{order.endPlace}}</td>\\n    <td>{{order.freight}}</td>\\n    <td>{{order.owner.user.name}}</td>\\n    <td>{{order.startTime |  date:\\\"yyyy/MM/dd HH:mm:ss\\\" }}</td>\\n    <td>\\n      <button type=\\\"button\\\" class=\\\"btn btn-info btn-sm\\\" (click)=\\\"college(order)\\\">\\n        <i class=\\\"fas fa-luggage-cart\\\"></i>\\n        揽收\\n      </button>\\n    </td>\\n  </tr>\\n  </tbody>\\n</table>\\n<app-page *ngIf=\\\"orders.totalPages != 0\\\" [setTotalPages]=\\\"orders.totalPages\\\" [setPage]=\\\"params.page\\\" [setSize]=\\\"params.size\\\" (selectedPage)=\\\"onPageSelected($event)\\\" (selectedSize)=\\\"onSizeSelected($event)\\\"></app-page>\\n\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\nimport { FuncModule } from '../../../func/func.module';\nimport {DOrdersComponent} from './dOrders.component';\nimport {DOrderRoutingModule} from './dOrder-routing.module';\n\n\n\n@NgModule({\n  declarations: [DOrdersComponent],\n    imports: [\n        CommonModule,\n        DOrderRoutingModule,\n        ReactiveFormsModule,\n        FuncModule,\n        FormsModule,\n        // NgxAmapModule.forRoot({\n        //   apiKey: '1c966914bda7a573909e2376cfe05b1d'\n        // })\n    ]\n})\nexport class DOrderModule {\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport {DOrdersComponent} from './dOrders.component';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DOrdersComponent,\n    data: {\n      title: '首页'\n    }\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class DOrderRoutingModule {\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2RyaXZlci9kT3JkZXJzL2RPcmRlcnMuY29tcG9uZW50LnNjc3MifQ== */\";"],"sourceRoot":"webpack:///"}