{"version":3,"sources":["./src/app/pages/auth/login/login.component.html","./src/app/pages/auth/login/login.component.ts","./src/app/func/Driver.ts","./src/app/func/User.ts","./src/app/pages/auth/login/login-routing.module.ts","./src/app/pages/auth/login/login.component.scss","./src/app/func/Owner.ts","./src/app/pages/auth/login/login.module.ts"],"names":[],"mappings":"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","file":"pages-auth-login-login-module.js","sourcesContent":["export default \"<div class=\\\"header\\\">\\n  <div class=\\\"row m-0\\\">\\n    <div class=\\\"col-md-3 offset-md-2\\\">\\n      <p class=\\\"title\\\"><b>欢迎使用本系统!</b></p>\\n    </div>\\n  </div>\\n</div>\\n\\n<div class=\\\"content\\\">\\n  <div class=\\\"row m-0 pt-5\\\">\\n    <div class=\\\"col-md-2 offset-md-8 mt-2 pl-3 pr-3 pt-4 pb-4 bg-white\\\">\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-md-6 border-right\\\">\\n          <h6 class=\\\"text-center\\\" [ngClass]=\\\"{'text-success font-weight-bolder' : mode === 'login'}\\\">\\n            <a href=\\\"javascript:void(0);\\\" (click)=\\\"changeToLogin()\\\" class=\\\"text-reset text-decoration-none\\\">登录</a>\\n          </h6>\\n        </div>\\n        <div class=\\\"col-md-6\\\">\\n          <h6 class=\\\"text-center\\\" [ngClass]=\\\"{'text-success font-weight-bolder' : mode === 'register'}\\\">\\n            <a href=\\\"javascript:void(0);\\\" (click)=\\\"changeToRegister()\\\"\\n               class=\\\"text-reset text-decoration-none\\\">注册</a>\\n          </h6>\\n        </div>\\n      </div>\\n\\n      <hr>\\n\\n      <form [formGroup]=\\\"loginForm\\\" (ngSubmit)=\\\"login()\\\" *ngIf=\\\"mode === 'login'\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"username\\\">手机号<code>*</code></label>\\n          <input class=\\\"form-control\\\" id=\\\"username\\\" placeholder=\\\"请输入手机号\\\" formControlName=\\\"username\\\"/>\\n        </div>\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"password\\\">密码<code>*</code></label>\\n          <input type=\\\"password\\\" class=\\\"form-control\\\" id=\\\"password\\\" placeholder=\\\"请输入密码\\\" formControlName=\\\"password\\\"/>\\n        </div>\\n        <hr>\\n        <button type=\\\"submit\\\" class=\\\"btn form-control login-button\\\">\\n          登录\\n        </button>\\n      </form>\\n\\n\\n      <form>\\n        <h2 style=\\\"text-align: center\\\" *ngIf=\\\"mode === 'register'\\\"> 欢迎使用</h2>\\n        <h2 style=\\\"text-align: center\\\" *ngIf=\\\"mode === 'register'\\\">物流运输系统</h2>\\n        <button class=\\\"btn btn-primary btn-block\\\" (click)=\\\"changeToDriverRegister()\\\" *ngIf=\\\"mode === 'register'\\\">\\n          司机注册\\n        </button>\\n        <button class=\\\"btn btn-primary btn-block\\\" (click)=\\\"changeToOwnerRegister()\\\" *ngIf=\\\"mode === 'register'\\\">\\n          货主注册\\n        </button>\\n      </form>\\n\\n\\n      <form [formGroup]=\\\"driverRegisterForm\\\" (ngSubmit)=\\\"driverRegister()\\\" *ngIf=\\\"mode === 'driverRegister'\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"register-name\\\">\\n            <small>姓名<code>*</code></small>\\n          </label>\\n          <input class=\\\"form-control form-control-sm\\\" id=\\\"register-name\\\" placeholder=\\\"请输入姓名\\\" formControlName=\\\"name\\\"/>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"register-username\\\">\\n            <small>手机号<code>*</code></small>\\n          </label>\\n          <input class=\\\"form-control form-control-sm\\\" id=\\\"register-username\\\" placeholder=\\\"请输入手机号\\\" formControlName=\\\"phone\\\"/>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"car\\\">\\n            <small>车牌号<code>*</code></small>\\n          </label>\\n          <input class=\\\"form-control form-control-sm\\\" id=\\\"car\\\" placeholder=\\\"请输入车牌号\\\" formControlName=\\\"licensePlateNumber\\\"/>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"register-password\\\">\\n            <small>密码<code>*</code></small>\\n          </label>\\n          <input type=\\\"password\\\" class=\\\"form-control form-control-sm\\\" id=\\\"register-password\\\" placeholder=\\\"请输入密码\\\"\\n                 formControlName=\\\"password\\\"/>\\n        </div>\\n        <hr>\\n        <button type=\\\"submit\\\"\\n                class=\\\"btn btn-success form-control form-control-sm\\\">\\n          注册\\n        </button>\\n      </form>\\n\\n\\n\\n\\n      <form [formGroup]=\\\"ownerRegisterForm\\\" (ngSubmit)=\\\"ownerRegister()\\\" *ngIf=\\\"mode === 'ownerRegister'\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"owner-name\\\">\\n            <small>姓名：<code>*</code></small>\\n          </label>\\n          <input class=\\\"form-control form-control-sm\\\" id=\\\"owner-name\\\" placeholder=\\\"请输入姓名\\\" formControlName=\\\"name\\\"/>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"owner-username\\\">\\n            <small>手机号<code>*</code></small>\\n          </label>\\n          <input class=\\\"form-control form-control-sm\\\" id=\\\"owner-username\\\" placeholder=\\\"请输入手机号\\\" formControlName=\\\"phone\\\"/>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"owner-address\\\">\\n            <small>住址<code>*</code></small>\\n          </label>\\n          <input class=\\\"form-control form-control-sm\\\" id=\\\"owner-address\\\" placeholder=\\\"请输入住址\\\" formControlName=\\\"address\\\"/>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"register-password\\\">\\n            <small>密码<code>*</code></small>\\n          </label>\\n          <input type=\\\"password\\\" class=\\\"form-control form-control-sm\\\" id=\\\"owner-password\\\" placeholder=\\\"请输入密码\\\"\\n                 formControlName=\\\"password\\\"/>\\n        </div>\\n        <hr>\\n        <button type=\\\"submit\\\"\\n                class=\\\"btn btn-success form-control form-control-sm\\\">\\n          注册\\n        </button>\\n      </form>\\n    </div>\\n  </div>\\n</div>\\n\\n<div class=\\\"footer\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col text-center\\\">\\n      <small>©{{year}} 河北工业大学 版本号:V{{version}}</small>\\n    </div>\\n  </div>\\n</div>\\n\";","import {Component, OnDestroy, OnInit} from '@angular/core';\nimport {AbstractControl, FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {UserService} from '../../../service/user.service';\nimport {HttpErrorResponse} from '@angular/common/http';\nimport {AuthService} from '../../../service/auth.service';\nimport {Router} from '@angular/router';\nimport {Driver} from '../../../func/Driver';\nimport {CommonService} from '../../../service/common.service';\nimport {Owner} from '../../../func/Owner';\nimport {config} from '../../../conf/app.conf';\nimport {GoodsType} from '../../../func/GoodsType';\nimport validate = WebAssembly.validate;\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss']\n})\nexport class LoginComponent implements OnInit, OnDestroy {\n\n  /** 当前模式 */\n  mode: string;\n\n  /** 登录表单对象 */\n  loginForm: FormGroup;\n\n  /** 注册表单对象 */\n  driverRegisterForm: FormGroup;\n  ownerRegisterForm: FormGroup;\n\n  version: string;\n\n  /** 错误信息 */\n  errorInfo: string;\n\n  /** 显示错误信息 */\n  showErrorInfo: boolean;\n  year = new Date().getFullYear();\n\n  /** 注册错误信息 */\n  registerErrorInfo: string;\n\n  /** 显示注册错误信息 */\n  showRegisterErrorInfo: boolean;\n\n  /** 注册提示信息 */\n  registerInfo: string;\n\n  /** 显示注册提示信息 */\n  showRegisterInfo: boolean;\n\n  projectConfig: { version: string };\n\n  constructor(private userService: UserService,\n              private authService: AuthService,\n              private router: Router,\n              private commonService: CommonService,\n              private builder: FormBuilder) {\n  }\n\n  ngOnInit(): void {\n    this.version = config.version;\n    this.changeToLogin();\n    /** 创建表单 */\n    this.loginForm = this.builder.group({\n      username: ['', [Validators.required]],\n      password: ['', Validators.required],\n    });\n    this.initDriverTable();\n    this.initOwnerTable();\n  }\n\n  initDriverTable(): void {\n    /** 创建司机注册表单 */\n    this.driverRegisterForm = this.builder.group({\n      name: [''],\n      phone: [''],\n      licensePlateNumber: [''],\n      password: [''],\n    });\n  }\n\n  initOwnerTable(): void {\n\n    /** 创建货主注册表单 */\n    this.ownerRegisterForm = this.builder.group({\n      name: [''],\n      phone: [''],\n      address: [''],\n      password: [''],\n    });\n  }\n\n  login(): void {\n    this.authService.login(this.loginForm.value)\n      .subscribe(() => {\n        this.authService.requestCurrentLoginUser(() => {\n          this.router.navigateByUrl('dashboard');\n        });\n      }, () => {\n        this.commonService.error(() => {\n\n        }, '登录失败,请检查手机号密码是否正确');\n      });\n  }\n\n  bindGoods(goodsType: GoodsType): void {\n    if (goodsType && goodsType.id) {\n      // 合法，设置 college\n      this.ownerRegisterForm.patchValue({\n        goods: goodsType\n      });\n    } else {\n      this.ownerRegisterForm.patchValue({\n        goods: null\n      });\n    }\n  }\n\n  selectGoods(goodsType: GoodsType): void {\n    if (goodsType && goodsType.id) {\n      // 合法，设置 college\n      this.driverRegisterForm.patchValue({\n        goods: goodsType\n      });\n    } else {\n      this.driverRegisterForm.patchValue({\n        goods: null\n      });\n    }\n  }\n\n\n  changeToLogin(): void {\n    this.mode = 'login';\n  }\n\n  changeToRegister(): void {\n    this.mode = 'register';\n  }\n\n  changeToDriverRegister(): void {\n    this.mode = 'driverRegister';\n  }\n\n  changeToOwnerRegister(): void {\n    this.mode = 'ownerRegister';\n  }\n\n\n  ngOnDestroy(): void {\n  }\n\n  get username(): AbstractControl {\n    return this.loginForm.get('username');\n  }\n\n  get no(): AbstractControl {\n    return this.driverRegisterForm.get('no');\n  }\n\n  get name(): AbstractControl {\n    return this.driverRegisterForm.get('name');\n  }\n\n  driverRegister(): void {\n    const driver = new Driver();\n    driver.user.name = this.driverRegisterForm.get('name').value;\n    driver.user.password = this.driverRegisterForm.get('password').value;\n    driver.user.username = this.driverRegisterForm.get('phone').value;\n    driver.licensePlateNumber = this.driverRegisterForm.get('licensePlateNumber').value;\n\n    console.log(driver);\n    this.userService.registerDriver(driver)\n      .subscribe(() => {\n        this.commonService.success(() => {\n          this.changeToLogin();\n        }, '注册成功');\n      }, (response: HttpErrorResponse) => {\n        this.registerErrorInfo = `${response.error.message}请尝试更换用户名或检查您的网络连接`;\n        this.showRegisterErrorInfo = true;\n      });\n  }\n\n  ownerRegister(): void {\n    const owner = new Owner();\n    owner.user.name = this.ownerRegisterForm.get('name').value;\n    owner.address = this.ownerRegisterForm.get('address').value;\n    owner.user.username = this.ownerRegisterForm.get('phone').value;\n    owner.user.password = this.ownerRegisterForm.get('password').value;\n\n    console.log(owner);\n    this.userService.registerOwner(owner)\n      .subscribe(() => {\n        this.commonService.success(() => {\n          this.changeToLogin();\n        }, '注册成功');\n      }, (response: HttpErrorResponse) => {\n        this.registerErrorInfo = `${response.error.message}请尝试更换用户名或检查您的网络连接`;\n        this.showRegisterErrorInfo = true;\n      });\n  }\n}\n\n","/**\n * 司机实体\n */\nimport {GoodsType} from './GoodsType';\nimport {CarType} from './CarType';\nimport {User} from './User';\n\nexport class Driver {\n  /** id */\n  id: number;\n\n  /** 名称 */\n  name: string;\n\n  goodsType: GoodsType;\n\n  carType: CarType;\n\n  user = new User();\n\n  phone: string;\n\n  licensePlateNumber: string;\n\n  company: string;\n\n\n\n  constructor(param?: {\n    name?: string,\n    id?: number,\n    goodsType?: GoodsType,\n    carType: CarType;\n    phone: string;\n    user: User;\n    licensePlateNumber: string;\n    company: string;\n  }) {\n    if (param) {\n      this.name = param.name;\n      this.id = param.id;\n      this.goodsType = param.goodsType;\n      this.carType = param.carType;\n      this.user = param.user;\n      this.phone = param.phone;\n      this.licensePlateNumber = param.licensePlateNumber;\n      this.company = param.company;\n    }\n  }\n}\n","/**\n * 用户实体\n */\nexport class User {\n  static ROLE_OWNER = 0;\n  static ROLE_DRIVER = 1;\n  /** id */\n  id: number;\n\n  /** 名称 */\n  name: string;\n\n  /** 用户名 */\n  username: string;\n\n  /** 密码 */\n  password: string;\n\n  /** 角色 */\n  role: number;\n\n  /** 是否为admin */\n  admin: boolean;\n\n  quota: number;\n\n  idnumber: string;\n\n  startTime: any;\n\n  constructor(data?:\n                { id?: number, name?: string, username?: string,\n                  password?: string, role?: number, admin?: boolean,\n                  quota?: number, idnumber?: string, startTime?: any}) {\n    if (data) {\n      if (data.id) {\n        this.id = data.id;\n      }\n\n      if (data.name) {\n      this.name = data.name;\n    }\n\n      if (data.username) {\n        this.username = data.username;\n      }\n\n      if (data.password) {\n        this.password = data.password;\n      }\n\n      if (data.role) {\n        this.role = data.role;\n      }\n\n      if (data.admin) {\n        this.admin = data.admin;\n      }\n\n      if (data.quota) {\n        this.quota = data.quota;\n      }\n      if (data.idnumber) {\n        this.idnumber = data.idnumber;\n      }\n      if (data.startTime) {\n        this.startTime = data.startTime;\n      }\n    }\n\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { LoginComponent } from './login.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginComponent,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class LoginRoutingModule { }\n","export default \"._bower-warning {\\n  background-color: #F8D035;\\n  font-size: 1.3em;\\n  height: 3em;\\n  line-height: 3em;\\n}\\n\\n.header {\\n  height: 72px;\\n}\\n\\n.title {\\n  font-size: 16px;\\n  height: 72px;\\n  line-height: 72px;\\n}\\n\\n.content {\\n  height: 620px;\\n  background-size: cover;\\n}\\n\\n.login-button {\\n  color: #fff;\\n  background-color: #28a745;\\n  border-color: #28a745;\\n}\\n\\n.login-button:hover {\\n  color: #fff;\\n  background-color: #218838;\\n  border-color: #1e7e34;\\n}\\n\\n.login-button:focus {\\n  box-shadow: 0 0 0 0.2rem rgba(72, 180, 97, 0.5);\\n}\\n\\n.login-button:disabled {\\n  color: #fff;\\n  background-color: #28a745;\\n  border-color: #28a745;\\n}\\n\\n.footer {\\n  padding: 36px 0;\\n  color: #6d6d6d;\\n}\\n\\n.link a {\\n  padding: 0 10px;\\n  font-size: 14px;\\n  color: #99A1A6;\\n}\\n\\n.power {\\n  font-size: 12px;\\n  margin-top: 8px;\\n  color: #99A1A6;\\n}\\n\\n.power a {\\n  font-size: 12px;\\n  color: #99A1A6;\\n}\\n\\n.h2 {\\n  color: blue;\\n}\\n\\n.content {\\n  background-image: url('blue-login-background-rotate.png');\\n}\\n\\n.login-form {\\n  width: 20em;\\n  max-width: 20em;\\n  margin-left: auto;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvYXV0aC9sb2dpbi9sb2dpbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHlCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxXQUFBO0VBQ0EsZ0JBQUE7QUFDRjs7QUFFQTtFQUNFLFlBQUE7QUFDRjs7QUFFQTtFQUNFLGVBQUE7RUFDQSxZQUFBO0VBQ0EsaUJBQUE7QUFDRjs7QUFFQTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtBQUNGOztBQUVBO0VBQ0UsV0FBQTtFQUNBLHlCQUFBO0VBQ0EscUJBQUE7QUFDRjs7QUFFQTtFQUNFLFdBQUE7RUFDQSx5QkFBQTtFQUNBLHFCQUFBO0FBQ0Y7O0FBRUE7RUFDRSwrQ0FBQTtBQUNGOztBQUVBO0VBQ0UsV0FBQTtFQUNBLHlCQUFBO0VBQ0EscUJBQUE7QUFDRjs7QUFFQTtFQUNFLGVBQUE7RUFDQSxjQUFBO0FBQ0Y7O0FBRUE7RUFDRSxlQUFBO0VBQ0EsZUFBQTtFQUNBLGNBQUE7QUFDRjs7QUFFQTtFQUNFLGVBQUE7RUFDQSxlQUFBO0VBQ0EsY0FBQTtBQUNGOztBQUVBO0VBQ0UsZUFBQTtFQUNBLGNBQUE7QUFDRjs7QUFFQTtFQUNFLFdBQUE7QUFDRjs7QUFFQTtFQUNJLHlEQUFBO0FBQ0o7O0FBVUE7RUFDRSxXQUFBO0VBQ0EsZUFBQTtFQUNBLGlCQUFBO0FBUEYiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9hdXRoL2xvZ2luL2xvZ2luLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLl9ib3dlci13YXJuaW5nIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI0Y4RDAzNTtcbiAgZm9udC1zaXplOiAxLjNlbTtcbiAgaGVpZ2h0OiAzZW07XG4gIGxpbmUtaGVpZ2h0OiAzZW07XG59XG5cbi5oZWFkZXIge1xuICBoZWlnaHQ6IDcycHg7XG59XG5cbi50aXRsZSB7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgaGVpZ2h0OiA3MnB4O1xuICBsaW5lLWhlaWdodDogNzJweDtcbn1cblxuLmNvbnRlbnQge1xuICBoZWlnaHQ6IDYyMHB4O1xuICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xufVxuXG4ubG9naW4tYnV0dG9uIHtcbiAgY29sb3I6ICNmZmY7XG4gIGJhY2tncm91bmQtY29sb3I6ICMyOGE3NDU7XG4gIGJvcmRlci1jb2xvcjogIzI4YTc0NTtcbn1cblxuLmxvZ2luLWJ1dHRvbjpob3ZlciB7XG4gIGNvbG9yOiAjZmZmO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjE4ODM4O1xuICBib3JkZXItY29sb3I6ICMxZTdlMzQ7XG59XG5cbi5sb2dpbi1idXR0b246Zm9jdXMge1xuICBib3gtc2hhZG93OiAwIDAgMCAuMnJlbSByZ2JhKDcyLCAxODAsIDk3LCAuNSk7XG59XG5cbi5sb2dpbi1idXR0b246ZGlzYWJsZWQge1xuICBjb2xvcjogI2ZmZjtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzI4YTc0NTtcbiAgYm9yZGVyLWNvbG9yOiAjMjhhNzQ1O1xufVxuXG4uZm9vdGVyIHtcbiAgcGFkZGluZzogMzZweCAwO1xuICBjb2xvcjogIzZkNmQ2ZDtcbn1cblxuLmxpbmsgYSB7XG4gIHBhZGRpbmc6IDAgMTBweDtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBjb2xvcjogIzk5QTFBNjtcbn1cblxuLnBvd2VyIHtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBtYXJnaW4tdG9wOiA4cHg7XG4gIGNvbG9yOiAjOTlBMUE2O1xufVxuXG4ucG93ZXIgYSB7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgY29sb3I6ICM5OUExQTY7XG59XG5cbi5oMiB7XG4gIGNvbG9yOiBibHVlO1xufVxuXG4uY29udGVudCB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuLi8uLi8uLi8uLi9hc3NldHMvaW1hZ2VzL2JsdWUtbG9naW4tYmFja2dyb3VuZC1yb3RhdGUucG5nJyk7XG4gIH1cbi8vLnJlY29yZCAuY29udGVudCB7XG4vLyAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuLi8uLi8uLi8uLi9hc3NldHMvaW1hZ2VzL2JsdWUtbG9naW4tYmFja2dyb3VuZC1yb3RhdGUucG5nJyk7XG4vL31cbi8vXG4vLy5pc3N1ZSAuY29udGVudCB7XG4vLyAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcuLi8uLi8uLi8uLi9hc3NldHMvaW1hZ2VzL2dyZWVuLWxvZ2luLWJhY2tncm91bmQtcm90YXRlLnBuZycpO1xuLy99XG5cblxuLmxvZ2luLWZvcm0ge1xuICB3aWR0aDogMjBlbTtcbiAgbWF4LXdpZHRoOiAyMGVtO1xuICBtYXJnaW4tbGVmdDogYXV0bztcbn1cbiJdfQ== */\";","/**\n * 司机实体\n */\nimport {GoodsType} from './GoodsType';\nimport {CarType} from './CarType';\nimport {User} from './User';\n\nexport class Owner {\n  /** id */\n  id: number;\n\n  user = new User();\n\n  goodsType: GoodsType;\n\n  address: string;\n\n  name: string;\n\n\n\n  constructor(param?: {\n    user?: User,\n    id?: number,\n    name?: string,\n    goodsType?: GoodsType,\n    address: string;\n  }) {\n    if (param) {\n      this.user = param.user;\n      this.id = param.id;\n      this.name = param.name;\n      this.goodsType = param.goodsType;\n      this.address = param.address;\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { LoginRoutingModule } from './login-routing.module';\nimport { LoginComponent } from './login.component';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\nimport {FuncModule} from '../../../func/func.module';\n\n\n@NgModule({\n  declarations: [LoginComponent],\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    LoginRoutingModule,\n    ReactiveFormsModule,\n    FuncModule,\n  ]\n})\nexport class LoginModule { }\n"],"sourceRoot":"webpack:///"}